<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Secure Login</title>
  <link rel="stylesheet" href="/static/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

</head>
<body>
  <div class="container">
    <h1>Secure Login</h1>
    <button id="dark-mode-toggle">Ahh, Dark mode?</button>
    <div id="login-section">
      <h2>Login</h2>
      <form id="login-form">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>
        <button type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="#" id="register-link">Register here</a>.</p>
    </div>

    <div id="register-section" style="display: none;">
      <h2>Register</h2>
      <form id="register-form">
        <label for="reg-username">Username:</label>
        <input type="text" id="reg-username" name="username" required>
        <label for="reg-password">Password:</label>
        <input type="password" id="reg-password" name="password" required>
        <button type="submit">Register</button>
      </form>
      <p>Already have an account? <a href="#" id="login-link">Login here</a>.</p>
    </div>

    <div id="otp-section" style="display: none;">
      <h2>Verify OTP</h2>
      <p>Enter the OTP from your authenticator app:</p>
      <form id="otp-form">
        <label for="otp">OTP:</label>
        <input type="text" id="otp" name="otp" required>
        <button type="submit">Verify OTP</button>
      </form>
      <p>Lost your device? <a href="#" id="backup-code-link">Use a backup code</a>.</p>
    </div>

    <div id="backup-code-section" style="display: none;">
      <h2>Use Backup Code</h2>
      <p>Enter one of your backup codes:</p>
      <form id="backup-code-form">
        <label for="backup-code">Backup Code:</label>
        <input type="text" id="backup-code" name="backup_code" required>
        <button type="submit">Verify Backup Code</button>
      </form>
      <p>Go back to <a href="#" id="otp-link">OTP verification</a>.</p>
    </div>

    <div id="protected-section" style="display: none;">
      <h2>Welcome!</h2>
      <p id="protected-message"></p>
      <button id="logout-button">Logout</button>
    </div>

    <div id="error-message" style="color: red; display: none;"></div>
    <div id="setup-modal" class="setup-modal" style="display: none;">
      <div class="carousel-container">
        <!-- Step 1: QR Code -->
        <div class="carousel-step active">
          <h2>Step 1: Scan QR Code</h2>
          <div class="qr-container">
            <img id="qr-image" src="" alt="QR Code">
          </div>
          <p>Open your authenticator app (Google Authenticator, Authy, etc.) and scan this QR code.</p>
        </div>
    
        <!-- Step 2: Manual Entry -->
        <div class="carousel-step">
          <h2>Step 2: Manual Entry</h2>
          <p>If you can't scan the QR code, enter this secret key manually:</p>
          <div class="secret-key">
            <span id="secret-key"></span>
            <button class="copy-btn" onclick="copySecretKey()"><i class="far fa-copy"></i></button>
          </div>
        </div>
    
        <!-- Step 3: Backup Codes -->
        <div class="carousel-step">
          <h2>Step 3: Save Backup Codes</h2>
          <div class="backup-codes">
            <p>These codes can be used if you lose access to your authenticator device:</p>
            <div id="backup-codes-list"></div>
            <button onclick="downloadBackupCodes()" class="copy-btn">
              <i class="fas fa-download"></i> Download Codes
            </button>
            <button onclick="copyBackupCodes()" class="copy-btn">
              <i class="far fa-copy"></i> Copy Codes
            </button>
          </div>
        </div>
    
        <!-- Step 4: Important Notes -->
        <div class="carousel-step">
          <h2>Important Notes</h2>
          <ul>
            <li>Store backup codes in a secure location</li>
            <li>Each code can only be used once</li>
            <li>You can generate new codes in your account settings</li>
          </ul>
        </div>
      </div>
    
      <!-- Carousel Navigation Buttons -->
      <button class="carousel-nav prev" onclick="prevStep()">&#10094;</button>
      <button class="carousel-nav next" onclick="nextStep()">&#10095;</button>
    
      <!-- Close Button -->
      <button class="close-btn" onclick="closeSetupModal()">Ã—</button>
    </div>
    <div id="setup-modal-overlay" class="setup-modal-overlay" style="display: none;"></div>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>
